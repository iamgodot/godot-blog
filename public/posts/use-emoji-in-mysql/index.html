<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Use emoji in MySQL | Godot&#39;s Blog</title>
<meta name="keywords" content="" />
<meta name="description" content="æœ€è¿‘ç¢°åˆ°ä¸€ä¸ªæœåŠ¡å™¨å¤„ç†è¯·æ±‚æŠ¥é”™ï¼Œä½†æ˜¯æœ¬èº«çš„ä»£ç é€»è¾‘æ²¡æœ‰é—®é¢˜ï¼Œæ’æŸ¥åå‘ç°åŸæ¥æ˜¯å‚æ•°ä¸­åŒ…å«äº† emojiï¼Œå¯¼è‡´å‘ MySQL æ’å…¥æ•°æ®æ—¶å¤±è´¥äº†ã€‚
è§£å†³èµ·æ¥å€’æ˜¯ä¸éº»çƒ¦ï¼Œå› ä¸ºä¸šåŠ¡ä¸Šä¸è¦æ±‚åšç›¸å…³çš„æ”¯æŒï¼Œæ‰€ä»¥æ•æ‰å¼‚å¸¸ä¹‹åè¿”å›é”™è¯¯ç ä¹Ÿå°±å¥½äº†ã€‚ä½†æ˜¯å¥½å¥‡ä¹‹ä¸‹ï¼Œåšäº†ä¸ª MySQL æ’å…¥ emoji çš„å®éªŒï¼Œå‘ç°é‡Œé¢è¿˜æ˜¯æœ‰ä¸å°‘é—¨é“çš„ã€‚
What&rsquo;s emoji ğŸ§ ä»¥å‰çš„ç²—æµ…ç†è§£å°±æ˜¯ç”± unicode æ”¯æŒçš„è¡¨æƒ…å­—ç¬¦ï¼Œè¿™æ¬¡è®¤çœŸæŸ¥äº†ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡è®²è§£å¾ˆè¯¦å°½çš„æ–‡ç« ï¼šEverything you need to know about emoji
æ ¹æ®é‡Œé¢çš„ä»‹ç»ï¼Œå…³äº emoji æ¯”è¾ƒå®˜æ–¹çš„è§£é‡Šï¼š
 Emoji are pictographs (pictorial symbols) that are typically presented in a colorful form and used inline in text. They represent things such as faces, weather, vehicles and buildings, food and drink, animals and plants, or icons that represent emotions, feelings, or activities.
 è€Œ emoji æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼š">
<meta name="author" content="">
<link rel="canonical" href="https://www.iamgodot.com/posts/use-emoji-in-mysql/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.d156b151269ca9f254ecd6e4c592b19e37346165a46b1b794368e59b7a6d3f36.css" integrity="sha256-0VaxUSacqfJU7NbkxZKxnjc0YWWkaxt5Q2jlm3ptPzY=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://www.iamgodot.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.iamgodot.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.iamgodot.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.iamgodot.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.iamgodot.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.83.1" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.iamgodot.com" accesskey="h" title="Godot&#39;s Blog (Alt + H)">Godot&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.iamgodot.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamgodot.com/archive/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamgodot.com/categories/code/" title="Code">
                    <span>Code</span>
                </a>
            </li>
            <li>
                <a href="https://www.iamgodot.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Use emoji in MySQL
    </h1>
    <div class="post-meta">November 21, 2020&nbsp;Â·&nbsp;1 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#whats-emoji-" aria-label="What&amp;rsquo;s emoji ğŸ§">What&rsquo;s emoji ğŸ§</a></li>
                <li>
                    <a href="#charset-in-mysql" aria-label="Charset in MySQL">Charset in MySQL</a></li>
                <li>
                    <a href="#more-charset-in-mysql" aria-label="More charset in MySQL">More charset in MySQL</a></li>
                <li>
                    <a href="#django-settings" aria-label="Django settings">Django settings</a></li>
                <li>
                    <a href="#end" aria-label="End">End</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>æœ€è¿‘ç¢°åˆ°ä¸€ä¸ªæœåŠ¡å™¨å¤„ç†è¯·æ±‚æŠ¥é”™ï¼Œä½†æ˜¯æœ¬èº«çš„ä»£ç é€»è¾‘æ²¡æœ‰é—®é¢˜ï¼Œæ’æŸ¥åå‘ç°åŸæ¥æ˜¯å‚æ•°ä¸­åŒ…å«äº† emojiï¼Œå¯¼è‡´å‘ MySQL æ’å…¥æ•°æ®æ—¶å¤±è´¥äº†ã€‚</p>
<p>è§£å†³èµ·æ¥å€’æ˜¯ä¸éº»çƒ¦ï¼Œå› ä¸ºä¸šåŠ¡ä¸Šä¸è¦æ±‚åšç›¸å…³çš„æ”¯æŒï¼Œæ‰€ä»¥æ•æ‰å¼‚å¸¸ä¹‹åè¿”å›é”™è¯¯ç ä¹Ÿå°±å¥½äº†ã€‚ä½†æ˜¯å¥½å¥‡ä¹‹ä¸‹ï¼Œåšäº†ä¸ª MySQL æ’å…¥ emoji çš„å®éªŒï¼Œå‘ç°é‡Œé¢è¿˜æ˜¯æœ‰ä¸å°‘é—¨é“çš„ã€‚</p>
<h1 id="whats-emoji-">What&rsquo;s emoji ğŸ§<a hidden class="anchor" aria-hidden="true" href="#whats-emoji-">#</a></h1>
<p>ä»¥å‰çš„ç²—æµ…ç†è§£å°±æ˜¯ç”± unicode æ”¯æŒçš„è¡¨æƒ…å­—ç¬¦ï¼Œè¿™æ¬¡è®¤çœŸæŸ¥äº†ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸€ç¯‡è®²è§£å¾ˆè¯¦å°½çš„æ–‡ç« ï¼š<a href="https://www.smashingmagazine.com/2016/11/character-sets-encoding-emoji/">Everything you need to know about emoji</a></p>
<p>æ ¹æ®é‡Œé¢çš„ä»‹ç»ï¼Œå…³äº emoji æ¯”è¾ƒå®˜æ–¹çš„è§£é‡Šï¼š</p>
<blockquote>
<p>Emoji are pictographs (pictorial symbols) that are typically presented in a colorful form and used inline in text. They represent things such as faces, weather, vehicles and buildings, food and drink, animals and plants, or icons that represent emotions, feelings, or activities.</p>
</blockquote>
<p>è€Œ emoji æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼š</p>
<blockquote>
<p>Emoji are &ldquo;picture characters&rdquo; originally associated with cellular telephone usage in Japan, but now popular worldwide. The word emoji comes from the Japanese çµµ (e â‰… picture) + æ–‡å­— (moji â‰… written character).</p>
</blockquote>
<p>æœ€å…³é”®çš„æ˜¯ï¼Œemoji éœ€è¦ 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥å¦‚æœ MySQL ä½¿ç”¨çš„æ˜¯æ™®é€š utf8 å­—ç¬¦é›†çš„è¯ï¼Œæ˜¯ä¸è¶³ä»¥è¡¨è¾¾ä¸€ä¸ª emoji çš„ä¿¡æ¯çš„ï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæ’å…¥å¤±è´¥ã€‚</p>
<h1 id="charset-in-mysql">Charset in MySQL<a hidden class="anchor" aria-hidden="true" href="#charset-in-mysql">#</a></h1>
<p>ä» MySQL çš„å®˜æ–¹è§£é‡Šçœ‹ï¼Œutf8mb4 æ”¯æŒæœ€å¤šæ¯ä¸ªå­—ç¬¦å››å­—èŠ‚çš„ç¼–ç æ–¹å¼ï¼Œè€Œå¯¹äºè¶…å‡º BMPï¼ˆç®€å•æ¥è¯´å°±æ˜¯ç»å¤§éƒ¨åˆ†çš„æ–‡å­—å’Œç¬¦å·å­—ç¬¦ï¼Œå‚è€ƒ<a href="https://en.wikipedia.org/wiki/Plane_(Unicode)">ç»´åŸºç™¾ç§‘</a>ï¼‰èŒƒå›´çš„å­—ç¬¦ï¼ˆæ¯”å¦‚ emojisï¼‰ï¼Œutf8mb3ï¼ˆä¹Ÿå°±æ˜¯ utf8ï¼‰æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ utf8mb4 æ‰å¯ä»¥ã€‚</p>
<p><img loading="lazy" src="https://static.iamgodot.com/content/images/2242299f3a78a9008c42e9162d4c31ee.png" alt=""  />
</p>
<p>å¦å¤–åœ¨ MySQL ä¸­ï¼Œcharset æ˜¯æœ‰å¤šä¸ªå±‚çº§çš„è®¾ç½®çš„ï¼Œæ‰€ä»¥å¦‚æœéœ€æ±‚æ˜ç¡®çš„è¯ï¼Œå¯ä»¥åªå¯¹å¿…è¦çš„ column/table ä½¿ç”¨ utf8mb4ï¼Œæ¯•ç«Ÿæ–°çš„å­—ç¬¦é›†ä¹Ÿæ˜¯è¦å ç”¨æ›´å¤šç©ºé—´çš„ã€‚</p>
<p>å¦‚æœæƒ³ä¸€æ­¥åˆ°ä½ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQL å¯¹å­—ç¬¦é›†çš„è®¾ç½®å¤§æ¦‚åˆ†æˆä¸‹é¢å‡ å±‚ï¼Œä»ä¸Šåˆ°ä¸‹ç²’åº¦ä¹Ÿä»å¤§åˆ°å°ï¼Œè€Œæ¯ä¸€çº§å¦‚æœæ²¡æœ‰æ˜¾å¼è®¾å®šçš„è¯ä¼šé»˜è®¤ä½¿ç”¨ä¸Šä¸€çº§çš„é…ç½®ï¼š</p>
<ul>
<li>character_set_server</li>
<li>character_set_database</li>
<li>table charset</li>
<li>column charset</li>
</ul>
<p>å‰ä¸¤è€…å¯ä»¥ä½¿ç”¨ <code>show variables like &quot;character%&quot;;</code> æŸ¥çœ‹ï¼Œè€Œåé¢ä¸¤ä¸ªåˆ™ä»æ•°æ®è¡¨çš„åˆ›å»ºè¯­å¥ä¸­ä½“ç° <code>show create table t_name;</code>.</p>
<h1 id="more-charset-in-mysql">More charset in MySQL<a hidden class="anchor" aria-hidden="true" href="#more-charset-in-mysql">#</a></h1>
<p>æŒ‰ç†è¯´å®Œæˆä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œå­—æ®µå°±å¯ä»¥å®Œç¾æ”¯æŒ emoji çš„æ’å…¥äº†ã€‚ä½†æ˜¯æ‰“å¼€ä¸€ä¸ªå®¢æˆ·ç«¯å°è¯•æ’å…¥ emoji å‘ç°ä»ç„¶ä¼šå¤±è´¥ï¼š</p>
<p><img loading="lazy" src="https://static.iamgodot.com/content/images/4ba81444f24f7e49aecb7cbf9f8605f1.png" alt=""  />
</p>
<p>åŸå› æ˜¯è¿˜æœ‰å…¶ä»–çš„ charset æ²¡æœ‰è®¾ç½®æ­£ç¡®ï¼Œé€šè¿‡æŸ¥çœ‹å˜é‡å¯ä»¥ç¡®è®¤ï¼š</p>
<p><img loading="lazy" src="https://static.iamgodot.com/content/images/f052fdc1a96804c876dc089077cdd657.png" alt=""  />
</p>
<p>character_set_client å’Œ character_set_connection è¿™ä¸¤é¡¹ä½¿ç”¨çš„è¿˜æ˜¯ utf8ï¼Œå®ƒä»¬æ§åˆ¶çš„æ˜¯å®¢æˆ·ç«¯åœ¨äº¤äº’å’Œä¼ è¾“è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œæ›´æ–°ä¹‹åæ’å…¥æˆåŠŸï¼Œä½†æ˜¯æŸ¥è¯¢å‘ç°ç»“æœå¹¶æ²¡æœ‰å±•ç¤ºæ­£å¸¸çš„ emojiï¼Œè€Œæ˜¯è¡¨ç¤ºä¹±ç çš„é—®å·ï¼š</p>
<p><img loading="lazy" src="https://static.iamgodot.com/content/images/66ff09d89c59a36755278c296462ae09.png" alt=""  />
</p>
<p>è¿™æ˜¯å› ä¸ºè¿˜æœ‰ä¸€é¡¹ charset æ²¡æœ‰è®¾ç½®æ­£ç¡®ï¼Œå³ character_set_resultsï¼Œè¿™æ˜¯æœåŠ¡å™¨åœ¨å›ä¼ å“åº”æ—¶ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œæ‰€ä»¥è™½ç„¶æˆåŠŸå‚¨å­˜äº†æ•°æ®ï¼Œä½†æ˜¯å±•ç¤ºå‡ºæ¥å´é¢ç›®å…¨éã€‚ç›´æ¥æ›´æ–°è®¾ç½®ï¼Œå†æ¬¡æŸ¥è¯¢ä¾¿ä¸€åˆ‡æ­£å¸¸äº†ï¼š</p>
<p><img loading="lazy" src="https://static.iamgodot.com/content/images/9bca21f21f1dc99235efa27a1e51e1d3.png" alt=""  />
</p>
<h1 id="django-settings">Django settings<a hidden class="anchor" aria-hidden="true" href="#django-settings">#</a></h1>
<p>åœ¨æœåŠ¡å™¨å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸æ•°æ®åº“äº¤äº’çš„å®¢æˆ·ç«¯éƒ½æ˜¯æœåŠ¡å™¨åº”ç”¨ï¼Œæ‰€ä»¥ä¹Ÿåº”å½“ç¡®ä¿åœ¨ä»£ç æˆ–è€…æ¡†æ¶ä¸­é…ç½®çš„ charset æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>åœ¨ Django ä¸­æ˜¯é€šè¿‡ DATABASES OPTIONS æ¥æŒ‡å®šè¿æ¥æ•°æ®åº“ä½¿ç”¨çš„å­—ç¬¦é›†çš„ï¼ˆé’ˆå¯¹ MySQLï¼‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">DATABASES <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;default&#34;</span>: {
        <span style="color:#75715e"># ...</span>
        <span style="color:#e6db74">&#34;OPTIONS&#34;</span>: {
            <span style="color:#e6db74">&#34;charset&#34;</span>: <span style="color:#e6db74">&#34;utf8mb4&#34;</span>,
            <span style="color:#75715e"># ...</span>
        }
    }
}
</code></pre></div><h1 id="end">End<a hidden class="anchor" aria-hidden="true" href="#end">#</a></h1>
<p>å¦å¤–åœ¨æŸ¥æ‰¾èµ„æ–™çš„è¿‡ç¨‹ä¸­è¿˜å‘ç°æœ‰å…¶ä»–çš„å®ç°æ€è·¯ï¼Œæ¯”å¦‚å¦‚æœä¸æƒ³æ”¹åŠ¨æ•°æ®åº“çš„è¯ï¼Œå¯ä»¥åœ¨åº”ç”¨å±‚è¿›è¡Œè½¬æ¢ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ç»´æŠ¤ä¸€ä¸ª emoji å’Œæ™®é€šå­—ç¬¦ä¸²çš„å¯¹åº”å…³ç³»ï¼Œç„¶åæŠŠè½¬æ¢ç»“æœå­˜å‚¨å…¥æ•°æ®è¡¨ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯ä¸ç ´åå·²æœ‰æ•°æ®åº“çš„çŠ¶æ€ï¼ŒåŒæ—¶å¯¹äºåº”ç”¨å±‚çš„è½¬æ¢é€»è¾‘ä¹Ÿå¯ä»¥æœ‰æ›´åŠ çµæ´»çš„æ§åˆ¶ã€‚</p>
<p>å½“ç„¶ï¼Œæœ€å¥½çš„åšæ³•è¿˜æ˜¯åœ¨ä¸€å¼€å§‹å¯¹éœ€æ±‚æœ¬èº«åšå¥½åˆ†æï¼Œå¦‚æœæœ‰ç¡®å®šçš„å­˜å‚¨è¦æ±‚ï¼Œæ¯”å¦‚ç”¨æˆ·åæˆ–è€…è¯„è®ºåº”å½“æ”¯æŒ emojiï¼Œé‚£ä¹ˆåœ¨å»ºè¡¨æ—¶å°±ç›´æ¥ä½¿ç”¨ç±»ä¼¼ utf8mb4 çš„æ–°å¼å­—ç¬¦é›†ï¼Œä¸€åŠ³æ°¸é€¸ã€‚</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://www.iamgodot.com/posts/the-silverlining/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>ç”Ÿå‘½ä¹‹å…‰</span>
  </a>
  <a class="next" href="https://www.iamgodot.com/posts/the-art-of-readable-code/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>The Art of Readable Code</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://www.iamgodot.com">Godot&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">
    <span>
        <a href="http://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡20005558å·-2</a>
    </span>
</footer>


<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
